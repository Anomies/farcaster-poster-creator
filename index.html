<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Farcaster Poster Creator 🎨</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Farcaster Poster Maker 🖼️</h1>

  <div class="controls">
    <input type="text" id="posterText" placeholder="Poster metninizi girin..." maxlength="60">
    <div class="color-picker-container">
        <label for="bgColor">Background Color:</label>
        <input type="color" id="bgColor" value="#6c5ce7">
    </div>
    <button onclick="updateCanvas()">Update Image</button>
  </div>

  <canvas id="posterCanvas" width="600" height="400"></canvas>
  
  <div class="actions">
    <button onclick="sharePoster()">Share on Farcaster 🚀</button>
  </div>

  <script type="module" src="app.js"></script>
  <script>
    // 'load' yerine 'DOMContentLoaded' kullanıyoruz. Bu olay çok daha erken tetiklenir.
    document.addEventListener('DOMContentLoaded', () => { 
        const statusElement = document.getElementById('status');
        
        if (window.miniApp) {
            statusElement.innerHTML = "SDK Nesnesi BULUNDU! ✅";
            
            try {
                // Bu çağrı artık sayfa yüklenir yüklenmez denenecek.
                window.miniApp.ready(); 
                statusElement.innerHTML += "<br>Ready() Başarılı! Uygulama Hazır.";
                console.log("Ready() Başarılı!");
            } catch (e) {
                statusElement.innerHTML += `<br>Ready() Çağrısı Başarısız: ${e.message}`;
                console.error("Ready() Çağrısı Hata:", e);
            }
        } else {
            statusElement.innerHTML = "SDK Nesnesi BULUNAMADI! ❌";
            console.error("window.miniApp nesnesi tanımlı değil.");
        }
    });
</script>
</body>
</html>