<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Farcaster Poster Creator ğŸ¨</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Farcaster Poster Maker ğŸ–¼ï¸</h1>

  <div class="controls">
    <input type="text" id="posterText" placeholder="Poster metninizi girin..." maxlength="60">
    <div class="color-picker-container">
        <label for="bgColor">Background Color:</label>
        <input type="color" id="bgColor" value="#6c5ce7">
    </div>
    <button onclick="updateCanvas()">Update Image</button>
  </div>

  <canvas id="posterCanvas" width="600" height="400"></canvas>
  
  <div class="actions">
    <button onclick="sharePoster()">Share on Farcaster ğŸš€</button>
  </div>

  <script type="module" src="app.js"></script>
  <script>
    // 'load' yerine 'DOMContentLoaded' kullanÄ±yoruz. Bu olay Ã§ok daha erken tetiklenir.
    document.addEventListener('DOMContentLoaded', () => { 
        const statusElement = document.getElementById('status');
        
        if (window.miniApp) {
            statusElement.innerHTML = "SDK Nesnesi BULUNDU! âœ…";
            
            try {
                // Bu Ã§aÄŸrÄ± artÄ±k sayfa yÃ¼klenir yÃ¼klenmez denenecek.
                window.miniApp.ready(); 
                statusElement.innerHTML += "<br>Ready() BaÅŸarÄ±lÄ±! Uygulama HazÄ±r.";
                console.log("Ready() BaÅŸarÄ±lÄ±!");
            } catch (e) {
                statusElement.innerHTML += `<br>Ready() Ã‡aÄŸrÄ±sÄ± BaÅŸarÄ±sÄ±z: ${e.message}`;
                console.error("Ready() Ã‡aÄŸrÄ±sÄ± Hata:", e);
            }
        } else {
            statusElement.innerHTML = "SDK Nesnesi BULUNAMADI! âŒ";
            console.error("window.miniApp nesnesi tanÄ±mlÄ± deÄŸil.");
        }
    });
</script>
</body>
</html>